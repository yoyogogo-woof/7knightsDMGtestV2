<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>傷害計算器</title>
<style>
body {
  font-family: "Microsoft JhengHei", sans-serif;
  background-color: #f5f6f7;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 30px;
}

h1 {
  font-size: 20px;
  margin-bottom: 20px;
}

.container {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 16px;
  align-items: start;
}

.card {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  padding: 16px;
  width: 290px;
}

.section {
  margin-bottom: 18px;
}

.section h2 {
  font-size: 15px;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
}

label {
  font-size: 13px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 4px 0;
}

.input-wrapper {
  position: relative;
  width: 120px;
}

.input-wrapper input {
  width: 100%;
  text-align: right;
  padding-right: 18px;
  border: 1px solid #ccc;
  border-radius: 6px;
  height: 26px;
  font-size: 13px;
}

.input-wrapper input.gray {
  background: #f0f0f0;
}

.input-wrapper::after {
  content: "%";
  position: absolute;
  right: 6px;
  top: 4px;
  font-size: 12px;
  color: #555;
  pointer-events: none;
}

select {
  width: 270px;
  padding: 4px 6px;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 13px;
}

.adjust-col {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: start;
  gap: 18px;
  padding-top: 28px;
}

.adjust-col input {
  width: 60px;
  height: 26px;
  text-align: center;
  border: 1px solid #ccc;
  border-radius: 6px;
  color: #333;
  font-size: 13px;
}

.adjust-col input::placeholder {
  color: #999;
  text-align: center;
}

.results {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  padding: 16px;
  margin-top: 20px;
  width: 620px;
  font-size: 13px;
}
</style>
</head>
<body>
<h1>傷害計算器</h1>

<div class="container">
  <!-- 左欄 -->
  <div class="card" id="leftCard">
    <div class="section">
      <h2>🗡 主輸出</h2>
      <label>面板攻擊力 <div class="input-wrapper"><input type="number" id="atkL" value="3600"></div></label>
      <label>基礎攻擊力 <div class="input-wrapper"><input type="number" id="baseL" value="1500"></div></label>
      <label>招式倍率 <div class="input-wrapper"><input type="number" id="skillRateL" value="100"></div></label>
      <label>暴擊傷害 <div class="input-wrapper"><input type="number" id="critDmgL" value="200"></div></label>
      <label>陣型提升攻擊力 <div class="input-wrapper"><input type="number" id="formAtkL" value="42"></div></label>
    </div>

    <div class="section">
      <h2>💎 套裝效果</h2>
      <select id="setL">
        <option value="none">無套裝效果</option>
        <option value="tracker4">追蹤者四件套 (+65% 弱點傷害)</option>
        <option value="avenger2">復仇者兩件套 (+15% 傷害量)</option>
        <option value="avenger4">復仇者四件套 (+30% 傷害量)</option>
        <option value="avenger4boss">復仇者四件套(攻擊對象為BOSS) (+70% 傷害量)</option>
      </select>
    </div>

    <div class="section">
      <h2>✨ BUFF (選填)</h2>
      <label>攻擊力增加 <div class="input-wrapper"><input type="number" id="atkBuffL"></div></label>
      <label>弱點傷害增加 <div class="input-wrapper"><input type="number" id="weakBuffL"></div></label>
      <label>傷害量增加 <div class="input-wrapper"><input type="number" id="dmgBuffL"></div></label>
      <label>暴擊傷害增加 <div class="input-wrapper"><input type="number" id="critBuffL"></div></label>
      <label>減少防禦力 <div class="input-wrapper"><input type="number" id="defDebuffL"></div></label>
      <label>無視防禦 <div class="input-wrapper"><input type="number" id="ignoreDefL"></div></label>
    </div>

    <div class="section">
      <h2>🐉 寵物</h2>
      <label>寵物攻擊力 <div class="input-wrapper"><input type="number" id="petAtkL"></div></label>
    </div>

    <div class="section">
      <h2>🛡 敵人</h2>
      <label>敵方防禦力 <div class="input-wrapper"><input type="number" id="enemyDefL"></div></label>
      <label>物理/魔法減傷 <div class="input-wrapper"><input type="number" id="enemyReductL"></div></label>
      <label>增加防禦力 <div class="input-wrapper"><input type="number" id="enemyBuffL"></div></label>
    </div>

    <div class="section">
      <h2>📊 結果</h2>
      <div id="resultL">只暴擊：0<br>只弱點：0<br>最終傷害：0</div>
    </div>
  </div>

  <!-- 中間增減 -->
  <div class="adjust-col">
    <input type="number" class="adjust" id="adjAtk" placeholder="+/-">
    <input type="number" class="adjust" id="adjBase" placeholder="+/-">
    <input type="number" class="adjust" id="adjSkill" placeholder="+/-">
    <input type="number" class="adjust" id="adjCrit" placeholder="+/-">
    <input type="number" class="adjust" id="adjForm" placeholder="+/-">
  </div>

  <!-- 右欄 -->
  <div class="card" id="rightCard">
    <div class="section">
      <h2>🗡 主輸出</h2>
      <label>面板攻擊力 <div class="input-wrapper"><input type="number" id="atkR"></div></label>
      <label>基礎攻擊力 <div class="input-wrapper"><input type="number" id="baseR"></div></label>
      <label>招式倍率 <div class="input-wrapper"><input type="number" id="skillRateR"></div></label>
      <label>暴擊傷害 <div class="input-wrapper"><input type="number" id="critDmgR"></div></label>
      <label>陣型提升攻擊力 <div class="input-wrapper"><input type="number" id="formAtkR"></div></label>
    </div>

    <div class="section">
      <h2>💎 套裝效果</h2>
      <select id="setR">
        <option value="none">無套裝效果</option>
        <option value="tracker4">追蹤者四件套 (+65% 弱點傷害)</option>
        <option value="avenger2">復仇者兩件套 (+15% 傷害量)</option>
        <option value="avenger4">復仇者四件套 (+30% 傷害量)</option>
        <option value="avenger4boss">復仇者四件套(攻擊對象為BOSS) (+70% 傷害量)</option>
      </select>
    </div>

    <div class="section">
      <h2>✨ BUFF (選填)</h2>
      <label>攻擊力增加 <div class="input-wrapper"><input type="number" id="atkBuffR"></div></label>
      <label>弱點傷害增加 <div class="input-wrapper"><input type="number" id="weakBuffR"></div></label>
      <label>傷害量增加 <div class="input-wrapper"><input type="number" id="dmgBuffR"></div></label>
      <label>暴擊傷害增加 <div class="input-wrapper"><input type="number" id="critBuffR"></div></label>
      <label>減少防禦力 <div class="input-wrapper"><input type="number" id="defDebuffR"></div></label>
      <label>無視防禦 <div class="input-wrapper"><input type="number" id="ignoreDefR"></div></label>
    </div>

    <div class="section">
      <h2>🐉 寵物</h2>
      <label>寵物攻擊力 <div class="input-wrapper"><input type="number" id="petAtkR"></div></label>
    </div>

    <div class="section">
      <h2>🛡 敵人</h2>
      <label>敵方防禦力 <div class="input-wrapper"><input type="number" id="enemyDefR"></div></label>
      <label>物理/魔法減傷 <div class="input-wrapper"><input type="number" id="enemyReductR"></div></label>
      <label>增加防禦力 <div class="input-wrapper"><input type="number" id="enemyBuffR"></div></label>
    </div>

    <div class="section">
      <h2>📊 結果</h2>
      <div id="resultR">只暴擊：0<br>只弱點：0<br>最終傷害：0</div>
    </div>
  </div>
</div>

<div class="results" id="compareResult">
  總計算結果區
</div>

<script>
// --- 基本同步邏輯 ---
const leftInputs = document.querySelectorAll("#leftCard input");
const rightInputs = document.querySelectorAll("#rightCard input");
const adjustInputs = document.querySelectorAll(".adjust");

leftInputs.forEach((input, i) => {
  input.addEventListener("input", () => syncRight(i));
});

adjustInputs.forEach((adj, i) => {
  adj.addEventListener("input", () => applyAdjust(i));
});

function syncRight(i) {
  const L = leftInputs[i];
  const R = rightInputs[i];
  const adj = adjustInputs[i];
  if (!R.value || R.classList.contains("gray")) {
    R.value = Number(L.value) + Number(adj.value || 0);
    R.classList.add("gray");
  }
}

function applyAdjust(i) {
  const L = leftInputs[i];
  const R = rightInputs[i];
  const adj = adjustInputs[i];
  if (adj.value === "") {
    R.value = L.value;
    R.classList.add("gray");
  } else {
    R.value = Number(L.value) + Number(adj.value);
    R.classList.remove("gray");
  }
}
</script>
</body>
</html>
